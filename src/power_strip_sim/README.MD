# **Power Strip Simulator (ROS2)**  

This package simulates a **power strip** controlled via **ROS2** and **MQTT**. It provides:  
- A **simulated Arduino node** handling power outlet states  
- A **ROS2 service interface** for controlling outlets  
- A **visual representation** using **pygame**  
- **MQTT integration** for remote control via mobile apps  

---

## **1. Installation & Setup**  

### **Clone & Build the Package**  
Place the package inside the `src/` folder of your ROS2 workspace:  
```bash
cd ~/ros2_ws/src
git clone <repository-link> power_strip_sim
```

Navigate to your workspace root, build, and source:  
```bash
cd ~/ros2_ws
colcon build
source install/setup.bash
```

---

## **2. Running the Simulation**  

### **A. Simulating the Arduino Node & ROS2 Commands**  
1ï¸âƒ£ **Start the Fake Arduino Node:**  
```bash
ros2 run power_strip_sim fake_arduino.py
```
2ï¸âƒ£ **Start the Power Strip Controller:**  
```bash
ros2 run power_strip_sim power_strip_controller.py
```
ğŸ’¡ **Send Commands (In Terminal 2):**  
Type commands in the format:  
```
ON1   â†’ Turns Outlet 1 ON  
OFF2  â†’ Turns Outlet 2 OFF  
TOGGLE3 â†’ Toggles Outlet 3  
STATUS  â†’ Displays outlet statuses  
```

3ï¸âƒ£ **Start the Visualization:**  
```bash
ros2 run power_strip_sim power_strip_visual.py
```

---

### **B. Remote Control via MQTT & Mobile App**  

1ï¸âƒ£ **Start the MQTT Broker (if not running):**  
```bash
sudo systemctl start mosquitto
```

2ï¸âƒ£ **Run the MQTT Fake Arduino Node:**  
```bash
ros2 run power_strip_sim mqtt_fake_arduino.py
```

3ï¸âƒ£ **Run the MQTT Power Strip Visualizer:**  
```bash
ros2 run power_strip_sim mqtt_power_strip_visual.py
```

ğŸ“± **Mobile Control:**  
Ensure your **system and mobile device are on the same network**.  
Use **IoT MQTT Panel App** (or any MQTT app).  
- Add buttons to send commands to **`power_strip/command`** topic.  
- Example messages: `ON1`, `OFF2`, `TOGGLE3`, `STATUS`.  

---

## **3. Directory Structure**  
```
power_strip_sim/
â”‚â”€â”€ include/                  # Header files (if needed)
â”‚â”€â”€ src/                      # Source files
â”‚   â”œâ”€â”€ fake_arduino.py       # ROS2 simulated Arduino node
â”‚   â”œâ”€â”€ power_strip_controller.py  # ROS2 CLI-based controller
â”‚   â”œâ”€â”€ power_strip_visual.py  # Pygame-based visualizer
â”‚   â”œâ”€â”€ mqtt_fake_arduino.py   # MQTT-integrated Fake Arduino
â”‚   â”œâ”€â”€ mqtt_power_strip_visual.py  # MQTT-integrated visualizer
â”‚â”€â”€ srv/                      # Custom service definitions
â”‚   â”œâ”€â”€ GetOutlet.srv         # Get outlet status
â”‚   â”œâ”€â”€ SetOutlet.srv         # Set outlet state
â”‚â”€â”€ CMakeLists.txt            # CMake build instructions
â”‚â”€â”€ README.md                 # Documentation
```

---

## **4. Dependencies**  
Ensure you have:  
âœ… **ROS2 Humble** installed  
âœ… **pygame** for visualization  
```bash
pip install pygame
```  
âœ… **Mosquitto MQTT** installed  
```bash
sudo apt install mosquitto mosquitto-clients
```
âœ… **paho-mqtt** (for Python MQTT integration)  
```bash
pip install paho-mqtt
```

---

## **5. Future Improvements**  
- Support for **more outlets**  
- **Enhanced UI** with clickable controls  
- Integration with **voice assistants**  

---


